// ==========================================================================
// Project:  Ember Addons
// Copyright: Â©2011 Capitainetrain and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================


(function(a){var b=Ember.get,c=Ember.set,d=Ember.addObserver,e=Ember.removeObserver,f=function(a){return b(a,"isEnumerable")===!0||Ember.isArray(a)},g=function(a,c){var d;return a&&f(a)?(d=a.getEach(c),b(d,"length")===0?d=undefined:d.uniq().get("length")===1&&(d=b(d,"firstObject"))):d=b(a,c),d},h=function(a,b,d){a&&f(a)?a.setEach(b,d):c(a,b,d)};Ember.ObjectProxy=Ember.Object.extend({content:null,allowsMultipleContent:!1,observableContent:Ember.computed(function(){var a=b(this,"content"),c,d;if(a&&f(a)){c=b(a,"length"),d=b(this,"allowsMultipleContent");if(c===1)a=b(a,"firstObject");else if(c===0||!d)a=null;a&&!d&&f(a)&&(a=null)}return a}).property("content","content.@each","allowsMultipleContent").cacheable(),init:function(){this._super(),this.contentDidChange()},destroy:function(){var a=this.get("content");a&&typeof a.destroy=="function"&&a.destroy()},unknownProperty:function(a){var c=b(this,"observableContent");return c?g(c,a):undefined},setUnknownProperty:function(a,c){var d=b(this,"observableContent");return d&&h(d,a,c),this},contentWillChange:Ember.beforeObserver(function(a,c){if(c!=="observableContent")return;var d=b(this,"observableContent"),f=this._observedProperties,g,h;if(d)for(g=0,h=f.length;g<h;g++)e(d,f[g],this.contentPropertyDidChange)},"observableContent"),contentDidChange:Ember.observer(function(a,c){if(c!=="observableContent")return;var e=b(this,"observableContent"),f=this._observedProperties,g,h;if(e&&this._oldContent!==e){for(g=0,h=f.length;g<h;g++)d(e,f[g],this,this.contentPropertyDidChange),this.contentPropertyDidChange(e,f[g]);this._oldContent=e}},"observableContent"),didAddListener:function(a,c,e){var f=b(this,"observableContent"),g=this._observedProperties,h=a.split(":").shift();g.contains(h)||(f&&d(f,h,this,this.contentPropertyDidChange),g.push(h))},contentPropertyDidChange:function(a,b){this.propertyDidChange(b)},_oldContent:null,_observedProperties:Ember.A()})})({}),function(a){}({})
